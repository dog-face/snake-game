# Deployment Checklist

Use this checklist to ensure everything is set up correctly for Render deployment.

## Pre-Deployment

- [ ] All code is committed and pushed to GitHub
- [ ] Repository is accessible from Render (GitHub account connected)
- [ ] You have a Render account (sign up at https://render.com)

## Step 1: Deploy Services

- [ ] Go to Render dashboard → "New +" → "Blueprint"
- [ ] Connect your GitHub repository
- [ ] Review the services that will be created (backend, frontend, database)
- [ ] Click "Apply" to create all services
- [ ] Wait for all services to build and deploy (this may take 5-10 minutes)

## Step 2: Get Service URLs

After deployment, note your service URLs:

- [ ] Backend URL: `https://____________________.onrender.com`
- [ ] Frontend URL: `https://____________________.onrender.com`
- [ ] Database: Created automatically (connection string is auto-set)

## Step 3: Configure Backend Environment Variables

Go to your backend service → "Environment" tab:

- [ ] `DATABASE_URL` - Should be auto-set by Render (verify it's there)
- [ ] `SECRET_KEY` - Should be auto-generated by Render (verify it's there)
- [ ] `CORS_ORIGINS` - Set to your frontend URL: `https://your-frontend-url.onrender.com`
- [ ] `ACCESS_TOKEN_EXPIRE_MINUTES` - Should be set to `1440` (verify)
- [ ] `SESSION_TIMEOUT` - Should be set to `300` (verify)

## Step 4: Configure Frontend Environment Variables

Go to your frontend service → "Environment" tab:

- [ ] `VITE_API_URL` - Set to: `https://your-backend-url.onrender.com/api/v1`

## Step 5: Bootstrap Database

- [ ] Go to backend service → "Events" or "Shell" tab
- [ ] Run: `python bootstrap_db.py`
- [ ] Verify migrations ran successfully (check logs)
- [ ] Database tables should now exist

## Step 6: Verify Deployment

- [ ] All services show "Live" status (green)
- [ ] Visit frontend URL - should load the app
- [ ] Test signup - create a new user account
- [ ] Test login - log in with created account
- [ ] Test game - play the snake game
- [ ] Test leaderboard - submit a score and view leaderboard
- [ ] Test watch mode - verify real-time updates work

## Step 7: Test WebSocket Connection

- [ ] Open browser console on frontend
- [ ] Check for WebSocket connection errors
- [ ] Test watch mode to verify WebSocket works

## Troubleshooting

If something doesn't work:

1. **Backend won't start:**
   - Check backend logs in Render dashboard
   - Verify `DATABASE_URL` is set correctly
   - Ensure database service is running

2. **Frontend can't connect:**
   - Check browser console for errors
   - Verify `VITE_API_URL` is set correctly
   - Check `CORS_ORIGINS` includes frontend URL
   - Ensure backend is "Live"

3. **Database errors:**
   - Verify `DATABASE_URL` format
   - Check database service is running
   - Re-run `python bootstrap_db.py`

4. **Build failures:**
   - Check build logs for specific errors
   - Verify all files are committed to Git
   - Ensure Dockerfile paths are correct

## Post-Deployment

- [ ] Test all features thoroughly
- [ ] Monitor logs for any errors
- [ ] Set up custom domain (optional)
- [ ] Configure monitoring/alerts (optional)
- [ ] Document any custom configurations

## Security Reminders

- [ ] `SECRET_KEY` is strong and unique (not default)
- [ ] `CORS_ORIGINS` is set to specific domain (not `*`)
- [ ] All environment variables are set correctly
- [ ] Database credentials are secure

## Next Steps

- [ ] Share the frontend URL with users
- [ ] Monitor usage and performance
- [ ] Consider upgrading to Standard plan for production
- [ ] Set up automated backups (if needed)

